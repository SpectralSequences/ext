!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}({0:function(e,t,n){"use strict";function r(e,t){let n=[];for(let r=0;r<e.length;r++)switch(e[r]){case 0:break;case 1:n.push(t[r]);break;default:n.push(`${e[r]} ${t[r]}`)}return n.join(" + ")}function o(e){return katex.renderToString(a(e))}function i(e){return katex.renderToString("\\begin{bmatrix}"+e.map(e=>e.join("&")).join("\\\\")+"\\end{bmatrix}")}function a(e){return"\\begin{bmatrix}"+e.join("&")+"\\end{bmatrix}"}function l(e){let t=e.split(/(?:\\\[)|(?:\\\()|(?:\\\))|(?:\\\])|(?:\$)/);for(let e=1;e<t.length;e+=2)t[e]=katex.renderToString(t[e],{throwOnError:!1});return t.join("\n")}function d(e,t,n){for(;;){let r=prompt(e);if(!r)return null;let o=f(r);if(null!==o&&o.length==n)return o;alert(t)}}function f(e){try{let t=JSON.parse(e.trim());if(Array.isArray(t)&&t.reduce((e,t)=>e&&Number.isInteger(t),!0))return t}catch(e){}return null}function c(e,t){for(;;){let n=prompt(e);if(!n)return null;let r=parseInt(n.trim());if(!isNaN(r))return r;alert(t)}}function u(e,t,n="text/plain"){Array.isArray(t)||(t=[t]);let r=document.createElement("a");r.href=URL.createObjectURL(new Blob(t,{type:n})),r.download=e,r.rel="noopener",r.dispatchEvent(new MouseEvent("click")),setTimeout(()=>URL.revokeObjectURL(r.href),6e4)}function s(e){return new TextDecoder("utf-8").decode(pako.inflate(e))}function m(e){return pako.deflate(e,{level:1})}n.d(t,"m",(function(){return r})),n.d(t,"j",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"k",(function(){return a})),n.d(t,"i",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"h",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return m})),n.d(t,"l",(function(){return h})),n.d(t,"a",(function(){return v}));const p=(()=>{let e=[];for(let t=0;t<26;t++)e.push(String.fromCharCode(65+t));for(let t=0;t<26;t++)e.push(String.fromCharCode(97+t));for(let t=0;t<10;t++)e.push(String.fromCharCode(48+t));return e.push("-"),e.push("_"),e})();function g(e){let t=e.charCodeAt(0);return 45==t?62:95==t?63:t<58?t-48+52:t<91?t-65:t-97+26}function h(e){return function(e){let t,n="";for(t=2;t<e.length;t+=3)n+=p[e[t-2]>>2],n+=p[(3&e[t-2])<<4|e[t-1]>>4],n+=p[(15&e[t-1])<<2|e[t]>>6],n+=p[63&e[t]];return t===e.length+1&&(n+=p[e[t-2]>>2],n+=p[(3&e[t-2])<<4]),t===e.length&&(n+=p[e[t-2]>>2],n+=p[(3&e[t-2])<<4|e[t-1]>>4],n+=p[(15&e[t-1])<<2]),n}(pako.deflate(e))}function v(e){return s(function(e){const t=e.length,n=(t-t%4)/4*3+(()=>{switch(t%4){case 2:return 1;case 3:return 2;default:return 0}})();let r,o=new Uint8Array(n),i=0,a=e=>{o[i]=e,i+=1};for(r=3;r<t;r+=4){const t=[e[r-3],e[r-2],e[r-1],e[r]].map(g);a((t[0]<<2)+(t[1]>>4)),a((t[1]<<4)+(t[2]>>2)),a((t[2]<<6)+t[3])}if(r==t+1){const t=[e[r-3],e[r-2]].map(g);a((t[0]<<2)+(t[1]>>4))}else if(r==t){const t=[e[r-3],e[r-2],e[r-1]].map(g);a((t[0]<<2)+(t[1]>>4)),a((t[1]<<4)+(t[2]>>2))}return o}(e))}},5:function(e,t,n){"use strict";n.r(t);var r=n(0);window.maxDegree=10,window.form=document.getElementById("header-form");form.prime.addEventListener("change",()=>{window.prime=parseInt(form.prime.value),2==window.prime?form.qpart.disabled=!0:form.qpart.disabled=!1}),form.prime.dispatchEvent(new Event("change")),form.algebra.addEventListener("change",()=>{"Milnor"==form.algebra.value?document.getElementById("profile").style.display="flex":document.getElementById("profile").style.display="none"}),form.algebra.dispatchEvent(new Event("change")),form.ppart.addEventListener("change",()=>{let e=form.ppart.value.trim();""!=e?(e=Object(r.f)(e),null===e?form.ppart.setCustomValidity("Invalid syntax."):!function(e){for(let t=1;t<=e.length;t++)for(let n=1;n<e[t-1];n++)if(void 0===e[t+n-1]&&(e[t+n-1]=0),e[n+t-1]<e[n-1]&&e[n+t-1]+n<e[t-1])return!1;return!0}(e)?form.ppart.setCustomValidity("Invalid profile function. A profile [p_1, p_2, ...] is valid iff p_i >= min(p_j, p_{i - j} - j) for all i > j."):form.ppart.setCustomValidity("")):form.ppart.setCustomValidity("")}),form.ppart.dispatchEvent(new Event("change")),form["module-type"].addEventListener("change",()=>{switch(form["module-type"].value){case"Finite Dimensional Module":window.moduleType="fdmodule";break;case"Finitely Presented Module":window.moduleType="fpmodule";break;case"Stunted Projective Space":window.moduleType="rpn";break;default:console.log(`Invalid module type: ${form["module-type"].value}`)}for(let e of["fdmodule","fpmodule","rpn"])e==window.moduleType?document.getElementById(e).style.display="flex":document.getElementById(e).style.display="none";document.getElementById(window.moduleType).onShow()}),window.fdform=document.getElementById("fdmodule-form"),fdform.mode.value="add";let o=()=>{window.mode=fdform.mode.value,window.fdform.mode.forEach(e=>{e.value==window.mode?e.parentElement.classList.add("active"):e.parentElement.classList.remove("active")})};function i(){const e=canvas.clientWidth,t=canvas.clientHeight,n=Math.round(.5+e/2)-.5;canvas.width=e,canvas.height=t;const r=maxDegree-minDegree;context.strokeStyle="#CCC";for(let n=minDegree;n<=maxDegree;n++){const o=f(n-minDegree,r,t);context.fillText(n,20,o),context.fillText(n,e-20,o),context.beginPath(),context.moveTo(40,o),context.lineTo(e-40,o),context.stroke()}context.strokeStyle="black";for(let e=minDegree;e<=maxDegree;e++){const o=f(e-minDegree,r,t),i=l(e),d=a(e);for(let a=0;a<i;a++){const c=n+20*(a-(i-1)/2);context.beginPath(),context.arc(c,o,3,0,2*Math.PI),context.stroke(),context.fill();for(let i=0;i<d[a].length;i++){if(!d[a][i])continue;const u=e+(1<<i),s=f(u-minDegree,r,t),m=l(u);for(let e=0;e<m;e++){const t=n+20*(e-(m-1)/2);if(0!=d[a][i][e]){if(context.beginPath(),0==i)context.moveTo(c,o),context.lineTo(t,s);else{const e=Math.sqrt((t-c)*(t-c)+(s-o)*(s-o)),n=Math.acos((c-t)/e);context.arc(c-e*Math.cos(n-Math.PI/3),o-e*Math.sin(n-Math.PI/3),e,n-2*Math.PI/3,n-Math.PI/3)}context.stroke()}}}}}}function a(e){if(actions.has(e))return actions.get(e);{let t=new Array,n=l(e);for(let e=0;e<n;e++)t.push(new Array);return actions.set(e,t),t}}function l(e){return dimensions.has(e)?dimensions.get(e):(dimensions.set(e,0),0)}function d(e,t){dimensions.set(e,t)}function f(e,t,n){return Math.round(.5+n-(e+1)/(t+2)*n)-.5}function c(e){if("Milnor"==form.algebra.value){if(!(form.ppart.validity.valid&&(2==prime||form.qpart.validity.valid)))return void alert("Invalid Milnor algebra profile")}let t={type:"finite dimensional module"};if(e){if(t.name=prompt("Name"),null===t.name)return;if(t.file_name=prompt("File Name (without extension)"),null===t.file_name)return}switch(t.p=window.prime,t.generic=2!=t.p,t.gens={},t.actions=[],form.algebra.value){case"Adem":t.algebra=["adem"];break;case"Milnor":t.algebra=["milnor"],(""!=form.ppart.value||prime>2&&""!=form.qpart.value)&&(t.profile={},""!=form.ppart.value&&(t.profile.truncated=!0,t.profile.p_part=Object(r.f)(form.ppart.value)),prime>2&&""!=form.qpart.value&&(t.profile.q_part=parseInt(form.qpart.value)))}for(let e=minDegree;e<=maxDegree;e++){const n=l(e),r=a(e);for(let o=0;o<n;o++){t.gens[`x_{${e},${o}}`]=e;for(let n=0;n<r[o].length;n++){const i=e+(1<<n);if(!r[o][n])continue;let a=!1,l=`Sq${1<<n} x_{${e},${o}} = `;for(let e=0;e<r[o][n].length;e++){const t=r[o][n][e];1==t?(l+=`x_{${i},${e}} + `,a=!0):t>0&&(l+=`${t} x_{${i},${e}} + `,a=!0)}a&&t.actions.push(l.substring(0,l.length-3))}}}return t}o(),fdform.mode.forEach(e=>{e.addEventListener("change",o)}),window.minDegree=parseInt(fdform["min-degree"].value),window.maxDegree=parseInt(fdform["max-degree"].value),fdform["min-degree"].addEventListener("change",()=>{window.minDegree=parseInt(fdform["min-degree"].value),i()}),fdform["max-degree"].addEventListener("change",()=>{window.maxDegree=parseInt(fdform["max-degree"].value),i()}),window.canvas=document.getElementById("fdmodule-canvas"),window.context=canvas.getContext("2d"),window.addEventListener("resize",i),window.dimensions=new Map,window.actions=new Map,document.getElementById("fdmodule").onShow=i,canvas.addEventListener("click",e=>{const t=canvas.getBoundingClientRect(),n=e.clientX-t.left,o=e.clientY-t.top,f=maxDegree-minDegree,c=(u=o,s=f,m=canvas.height,Math.round((1-u/m)*(s+2)-1)+minDegree);var u,s,m;const p=l(c),g=Math.round(.5+canvas.width/2)-.5;let h=Math.round((n-g)/20+(p-1)/2);switch(h<0?h=0:h>=p&&(h=p-1),mode){case"add":d(c,p+1),a(c).push(new Array);for(let e=0;c-(1<<e)>=minDegree;e++){const t=c-(1<<e),n=l(t),r=a(t);for(let t=0;t<n;t++)r[t].length>e&&r[t][e].push(0)}break;case"rm":if(p>0){d(c,p-1),a(c).splice(h,1);for(let e=0;c-(1<<e)>=minDegree;e++){const t=c-(1<<e),n=l(t),r=a(t);for(let t=0;t<n;t++)r[t].length>e&&r[t][e].splice(h,1)}}break;case"action":let e;for(;;)if(e=parseInt(prompt("Set Sq^{2^i} for i = ?")),isNaN(e)){if(!confirm("Invalid value of i"))return}else if(c+(1<<e)>maxDegree){if(!confirm("Value of i too large"))return}else{if(0!=l(c+(1<<e)))break;if(!confirm("Target dimension is 0"))return}const t=l(c+(1<<e));let n;for(;n=Object(r.f)(prompt("Set value of action")),null===n||n.length!=t||!n.reduce((e,t)=>e&&t<window.prime,!0);)if(!confirm("Invalid value. Please write action in the form [0, 1, ...]"))return;a(c)[h][e]=n;break;default:console.log("Invalid mode")}i()}),i(),document.getElementById("download").addEventListener("click",()=>{const e=c(!0);Object(r.c)(`${e.file_name}.json`,JSON.stringify(e),"application/json")}),document.getElementById("resolve").addEventListener("click",()=>{const e=c(!1),t=[{recipients:["Resolver"],sseq:"Main",action:{ConstructJson:{algebra_name:"adem",data:JSON.stringify(e)}}},{recipients:["Resolver"],sseq:"Main",action:{Resolve:{max_degree:30}}}].map(JSON.stringify).join("\n");window.location.href=`index.html?data=${Object(r.l)(t)}`}),form["module-type"].dispatchEvent(new Event("change"))}});